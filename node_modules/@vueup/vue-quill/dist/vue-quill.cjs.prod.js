/*!
 * VueQuill @vueup/vue-quill v1.0.0-alpha.40
 * https://vueup.github.io/vue-quill/
 * 
 * Includes quill v1.3.7
 * https://quilljs.com/
 * 
 * Copyright (c) 2021 Ahmad Luthfi Masruri
 * Released under the MIT license
 * Date: 2021-04-13T04:42:03.902Z
 */
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("quill"),t=require("quill-delta"),l=require("vue");function o(e){return e&&"object"==typeof e&&"default"in e?e.default:e}var n=o(e),r=o(t);const a={essential:[[{header:[1,2,3,4,5,6,!1]}],["bold","italic","underline"],[{list:"ordered"},{list:"bullet"},{align:[]}],["blockquote","code-block","link"],[{color:[]},"clean"]],minimal:[[{header:1},{header:2}],["bold","italic","underline"],[{list:"ordered"},{list:"bullet"},{align:[]}]],full:[["bold","italic","underline","strike"],["blockquote","code-block"],[{header:1},{header:2}],[{list:"ordered"},{list:"bullet"}],[{script:"sub"},{script:"super"}],[{indent:"-1"},{indent:"+1"}],[{direction:"rtl"}],[{size:["small",!1,"large","huge"]}],[{header:[1,2,3,4,5,6,!1]}],[{color:[]},{background:[]}],[{font:[]}],[{align:[]}],["link","video","image"],["clean"]]},i=l.defineComponent({name:"QuillEditor",props:{content:{type:[String,Object],default:{}},contentType:{type:String,default:"delta",validator:e=>["delta","html","text"].includes(e)},enable:{type:Boolean,default:!0},readOnly:{type:Boolean,default:!1},placeholder:{type:String,required:!1},theme:{type:String,default:"snow",validator:e=>["snow","bubble",""].includes(e)},toolbar:{type:[String,Array,Object],required:!1,validator:e=>"string"!=typeof e||""===e||("#"===e.charAt(0)||-1!==Object.keys(a).indexOf(e))},options:{type:Object,required:!1},globalOptions:{type:Object,required:!1}},emits:["textChange","selectionChange","editorChange","update:content","focus","blur","ready"],setup:(e,t)=>{let o,r;l.onMounted((()=>{d()})),l.onBeforeUnmount((()=>{o=null}));const i=l.ref(),d=()=>{var l;i.value&&(r=u(),o=new n(i.value,r),p(e.content),o.on("text-change",s),o.on("selection-change",b),o.on("editor-change",h),"bubble"!==e.theme&&i.value.classList.remove("ql-bubble"),"snow"!==e.theme&&i.value.classList.remove("ql-snow"),null===(l=o.getModule("toolbar"))||void 0===l||l.container.addEventListener("mousedown",(e=>{e.preventDefault()})),t.emit("ready",o))},u=()=>{const t={};return""!==e.theme&&(t.theme=e.theme),e.readOnly&&(t.readOnly=e.readOnly),e.placeholder&&(t.placeholder=e.placeholder),e.toolbar&&""!==e.toolbar&&(t.modules={toolbar:(()=>{if("object"==typeof e.toolbar)return e.toolbar;if("string"==typeof e.toolbar){return"#"===e.toolbar.charAt(0)?e.toolbar:a[e.toolbar]}})()}),Object.assign({},e.globalOptions,e.options,t)},s=(e,l,o)=>{t.emit("update:content",g()),t.emit("textChange",{delta:e,oldContents:l,source:o})},c=l.ref(),b=(e,l,n)=>{c.value=!!(null==o?void 0:o.hasFocus()),t.emit("selectionChange",{range:e,oldRange:l,source:n})};l.watch(c,(e=>{t.emit(e?"focus":"blur",i)}));const h=(...e)=>{"text-change"===e[0]&&t.emit("editorChange",{name:e[0],delta:e[1],oldContents:e[2],source:e[3]}),"selection-change"===e[0]&&t.emit("editorChange",{name:e[0],range:e[1],oldRange:e[2],source:e[3]})},g=()=>"html"===e.contentType?y():"text"===e.contentType?v():null==o?void 0:o.getContents(),p=t=>{"html"===e.contentType?f(t):"text"===e.contentType?m(t):null==o||o.setContents(t)},v=()=>{var e;return null!==(e=null==o?void 0:o.getText())&&void 0!==e?e:""},m=e=>{null==o||o.setText(e)},y=()=>{var e;return null!==(e=null==o?void 0:o.root.innerHTML)&&void 0!==e?e:""},f=e=>{null==o||o.clipboard.dangerouslyPasteHTML(e)};return l.watch((()=>e.content),(t=>{o&&t&&t!==e.content&&p(t)})),l.watch((()=>e.enable),(e=>{o&&o.enable(e)})),{editor:i,getEditor:()=>i.value,getToolbar:()=>{var e;return null===(e=null==o?void 0:o.getModule("toolbar"))||void 0===e?void 0:e.container},getQuill:()=>{if(o)return o;throw'The quill editor hasn\'t been instantiated yet, \n                  make sure to call this method when the editor ready\n                  or use v-on:ready="onReady(quill)" event instead.'},getContents:g,setContents:p,getHTML:y,setHTML:f,getText:v,setText:m,reinit:()=>{l.nextTick((()=>{var e;!t.slots.toolbar&&o&&(null===(e=o.getModule("toolbar"))||void 0===e||e.container.remove()),d(),console.log("reinit call")}))}}},inheritAttrs:!1,render(){var e,t;return[null===(t=(e=this.$slots).toolbar)||void 0===t?void 0:t.call(e),l.h("div",{ref:"editor",...this.$attrs})]}});exports.Quill=n,exports.Delta=r,exports.QuillEditor=i;
